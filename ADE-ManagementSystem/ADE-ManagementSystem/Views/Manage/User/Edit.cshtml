@using ADE_ManagementSystem.Global
@using Microsoft.AspNet.Identity
@model ADE_ManagementSystem.Models.AspNetUser

@{
    ViewBag.Title = "Edit";
    string userProfileLink = ProjectConstants.UserProfileLink + Model.Id + ".jpg";
}

<h2>Edit</h2>

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-info">
        <strong>Oops!</strong> @TempData["ErrorMessage"]
    </div>
}

 <div class="row">
    <div class="col-sm-6">
            
            @if (File.Exists(Server.MapPath(userProfileLink)))
            {
                <img src="@(userProfileLink)" width="200" height="200" class=" img-circle img-thumbnail">

            }
            else
            {
                <img src="@("/Images/Users/defaultpic.png")" width="200" height="200" class=" img-circle img-thumbnail">
            
            }
        
        <br/>
        <button class="btn btn-white" type="button" style="margin-top:30px; margin-left: 10px" onclick="chooseFile();">upload profile pic</button>
@using (Html.BeginForm("SaveImage", "Manage", FormMethod.Post, new { enctype = "multipart/form-data", style = "height:0px;overflow:hidden" }))
{
    <form action="" method="post" enctype="multipart/form-data">

        <input type="file" id="fileInput" name="image" onchange="newImage()">
        <input type="submit" />
    </form>

}
        @*<form action="/Manage/SaveImage" method="post" enctype="multipart/form-data" style="height:0px;overflow:hidden">
            
        </form>*@
        

        @*<h6>Upload adfad photo...</h6>
            @using (Html.BeginForm("SaveImage", "Manage", FormMethod.Post, new { enctype = "multipart/form-data" })) { 
                <form action="" method="post" enctype="multipart/form-data">
                    <input type="file" name="image" class="text-center center-block well well-sm">
                    <input type="submit" value="upload" />
                </form>
            }*@

        </div>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    
    <div class="col-sm-6 ">
            
        <div class="form-horizontal">
            @Html.ValidationSummary(true, "", new {@class = "text-danger"})
            @Html.HiddenFor(model => model.Id)

            <div class="form-group">
                @Html.LabelFor(model => model.Email, htmlAttributes: new {@class = "control-label col-md-2"})
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Email, new {htmlAttributes = new {@class = "form-control"}})
                    @Html.ValidationMessageFor(model => model.Email, "", new {@class = "text-danger"})
                </div>
            </div>

            @Html.HiddenFor(model => model.PasswordHash, new {htmlAttributes = new {@class = "form-control"}})

            @Html.HiddenFor(model => model.SecurityStamp, new {htmlAttributes = new {@class = "form-control"}})

            @*<div class="form-group">
            @Html.LabelFor(model => model.PhoneNumber, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.PhoneNumber, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.PhoneNumber, "", new { @class = "text-danger" })
            </div>
        </div>*@

            @*<div class="form-group">
            @Html.LabelFor(model => model.PhoneNumberConfirmed, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <div class="checkbox">
                    @Html.EditorFor(model => model.PhoneNumberConfirmed)
                    @Html.ValidationMessageFor(model => model.PhoneNumberConfirmed, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>*@

            @*<div class="form-group">
            @Html.LabelFor(model => model.TwoFactorEnabled, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <div class="checkbox">
                    @Html.EditorFor(model => model.TwoFactorEnabled)
                    @Html.ValidationMessageFor(model => model.TwoFactorEnabled, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>*@

            @*<div class="form-group">
            @Html.LabelFor(model => model.LockoutEndDateUtc, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.LockoutEndDateUtc, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.LockoutEndDateUtc, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.LockoutEnabled, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <div class="checkbox">
                    @Html.EditorFor(model => model.LockoutEnabled)
                    @Html.ValidationMessageFor(model => model.LockoutEnabled, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.AccessFailedCount, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.AccessFailedCount, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.AccessFailedCount, "", new { @class = "text-danger" })
            </div>
        </div>*@

            <div class="form-group">
                @Html.LabelFor(model => model.UserName, htmlAttributes: new {@class = "control-label col-md-2"})
                <div class="col-md-10">
                    @Html.EditorFor(model => model.UserName, new {htmlAttributes = new {@class = "form-control"}})
                    @Html.ValidationMessageFor(model => model.UserName, "", new {@class = "text-danger"})
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.FullName, htmlAttributes: new {@class = "control-label col-md-2"})
                <div class="col-md-10">
                    @Html.EditorFor(model => model.FullName, new {htmlAttributes = new {@class = "form-control"}})
                    @Html.ValidationMessageFor(model => model.FullName, "", new {@class = "text-danger"})
                </div>
            </div>

            @*<div class="form-group">
            @Html.LabelFor(model => model.ImageExtension, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.ImageExtension, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.ImageExtension, "", new { @class = "text-danger" })
            </div>
        </div>*@

            <div class="form-group">
                <div class="col-md-offset-2 col-xs-2">
                    <input type="submit" value="Save" class="btn btn-default"/>
                </div>
                <div class="col-xs-3">
                    <button class="btn btn-default"> @Html.ActionLink("Cancel", "Index")</button>

                </div>
            </div>
        
        </div>
    </div>
}

    
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        function chooseFile() {
            $("#fileInput").click();
        }
        function newImage() {
            $("#fileInput").closest("form").submit();
        }
    </script>
}
